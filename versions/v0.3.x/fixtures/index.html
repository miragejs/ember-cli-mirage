<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Fixtures &middot; Ember CLI Mirage
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/versions/v0.3.x/assets/css/syntax.css">
  <link rel="stylesheet" href="/versions/v0.3.x/assets/css/style.css">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/versions/v0.3.x/assets/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/versions/v0.3.x/assets/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body>
    <div class="Topbar">
      <div class="Container">
      </div>
    </div>

    <header class="Header">
  <div class="Container">
    <nav class='Header__nav'>
      <ul class='Header__nav-list'>
        <li class='Header__nav-item'>
          <a href='/versions/v0.4.x' class="Header__nav-item-link active">
            <span class="u-mobile">Docs</span>
            <span class="u-desktop">Documentation</span>
          </a>
        </li>
        <li class='Header__nav-item'>
          <a href='/blog' class="Header__nav-item-link">Blog</a>
        </li>
        <li class='Header__nav-item'>
          <a href='/about' class="Header__nav-item-link">About</a>
        </li>
        <li class='Header__nav-item'>
          <a href="https://github.com/samselikoff/ember-cli-mirage" class='Header__nav-item-link' target="_blank">GitHub</a>
        </li>
      </ul>
    </nav>
    <a class="Header__logo" href="/">
      <span class='Header__logo-minor'>Ember CLI</span><br>
      <span class='Header__logo-major'>Mirage</span>
    </a>
  </div>
</header>


    <div class="Wrapper">
      <div class="Content">
        

<div class="Side-panel">

  <div class="Mobile-nav">
    <select class="Mobile-nav__toc" onchange="if (this.value) window.location.href=this.value">
      <option value="">Navigate the docs...</option>
      
        


  
  <optgroup label='Getting started'>

<option value="/versions/v0.3.x/">Overview</option>


      
        


<option value="/versions/v0.3.x/installation/">Installation</option>


      
        


<option value="/versions/v0.3.x/quickstart/">Quickstart</option>


      
        


<option value="/versions/v0.3.x/upgrading/">Upgrading</option>


      
        


  
    </optgroup>
  
  <optgroup label='Writing your server'>

<option value="/versions/v0.3.x/defining-routes/">Defining routes</option>


      
        


<option value="/versions/v0.3.x/seeding-your-database/">Seeding your database</option>


      
        


<option value="/versions/v0.3.x/acceptance-testing/">Acceptance testing</option>


      
        


  
    </optgroup>
  
  <optgroup label='API'>

<option value="/versions/v0.3.x/configuration/">Configuration</option>


      
        


<option value="/versions/v0.3.x/collections/">Collections</option>


      
        


<option value="/versions/v0.3.x/route-handlers/">Route handlers</option>


      
        


<option value="/versions/v0.3.x/database/">Database</option>


      
        


<option value="/versions/v0.3.x/factories/">Factories</option>


      
        


<option value="/versions/v0.3.x/fixtures/">Fixtures</option>


      
        


<option value="/versions/v0.3.x/models/">Models</option>


      
        


<option value="/versions/v0.3.x/schema/">Schema</option>


      
        


<option value="/versions/v0.3.x/serializers/">Serializers</option>


      
        


<option value="/versions/v0.3.x/shorthands/">Shorthands</option>


      
        


  
    </optgroup>
  
  <optgroup label='Cookbook'>

<option value="/versions/v0.3.x/manually-starting-mirage/">Manually starting Mirage</option>


      
        


<option value="/versions/v0.3.x/simulating-cookie-responses/">Simulating cookie responses</option>

  </optgroup>


      
    </select>

    <div class="Mobile-nav__version">
      <span class='Mobile-nav__version-label'>Version: </span>
      <select class='Mobile-nav__version-select' onchange="if (this.value) window.location.href=this.value">
        
          <option value="/versions/v0.4.x" >v0.4.x</option>
        
          <option value="/versions/v0.3.x" selected >v0.3.x</option>
        
          <option value="/versions/v0.2.x" >v0.2.x</option>
        
          <option value="/versions/v0.1.x" >v0.1.x</option>
        
          <option value="/versions/v0.0.29" >v0.0.29</option>
        
          <option value="/versions/v0.0.28" >v0.0.28</option>
        
          <option value="/versions/v0.0.27" >v0.0.27</option>
        
      </select>
    </div>
  </div>

  <div class="Desktop-nav">
    <div class="Desktop-nav__version">
      <span class="Desktop-nav__version-label">Version: </span>
      <select class='Desktop-nav__version-select' onchange="if (this.value) window.location.href=this.value">
        
        <option value="/versions/v0.4.x" >v0.4.x</option>
        
        <option value="/versions/v0.3.x" selected >v0.3.x</option>
        
        <option value="/versions/v0.2.x" >v0.2.x</option>
        
        <option value="/versions/v0.1.x" >v0.1.x</option>
        
        <option value="/versions/v0.0.29" >v0.0.29</option>
        
        <option value="/versions/v0.0.28" >v0.0.28</option>
        
        <option value="/versions/v0.0.27" >v0.0.27</option>
        
      </select>
    </div>

    <ul class="Desktop-nav__toc">
      
        
          <li class='Desktop-nav__section'>Getting started</li>
        

        

<li>
  <a class="Desktop-nav__item " href="/versions/v0.3.x/">
    Overview
  </a>
</li>

      
        

        

<li>
  <a class="Desktop-nav__item " href="/versions/v0.3.x/installation/">
    Installation
  </a>
</li>

      
        

        

<li>
  <a class="Desktop-nav__item " href="/versions/v0.3.x/quickstart/">
    Quickstart
  </a>
</li>

      
        

        

<li>
  <a class="Desktop-nav__item " href="/versions/v0.3.x/upgrading/">
    Upgrading
  </a>
</li>

      
        
          <li class='Desktop-nav__section'>Writing your server</li>
        

        

<li>
  <a class="Desktop-nav__item " href="/versions/v0.3.x/defining-routes/">
    Defining routes
  </a>
</li>

      
        

        

<li>
  <a class="Desktop-nav__item " href="/versions/v0.3.x/seeding-your-database/">
    Seeding your database
  </a>
</li>

      
        

        

<li>
  <a class="Desktop-nav__item " href="/versions/v0.3.x/acceptance-testing/">
    Acceptance testing
  </a>
</li>

      
        
          <li class='Desktop-nav__section'>API</li>
        

        

<li>
  <a class="Desktop-nav__item " href="/versions/v0.3.x/configuration/">
    Configuration
  </a>
</li>

      
        

        

<li>
  <a class="Desktop-nav__item " href="/versions/v0.3.x/collections/">
    Collections
  </a>
</li>

      
        

        

<li>
  <a class="Desktop-nav__item " href="/versions/v0.3.x/route-handlers/">
    Route handlers
  </a>
</li>

      
        

        

<li>
  <a class="Desktop-nav__item " href="/versions/v0.3.x/database/">
    Database
  </a>
</li>

      
        

        

<li>
  <a class="Desktop-nav__item " href="/versions/v0.3.x/factories/">
    Factories
  </a>
</li>

      
        

        

<li>
  <a class="Desktop-nav__item active" href="/versions/v0.3.x/fixtures/">
    Fixtures
  </a>
</li>

      
        

        

<li>
  <a class="Desktop-nav__item " href="/versions/v0.3.x/models/">
    Models
  </a>
</li>

      
        

        

<li>
  <a class="Desktop-nav__item " href="/versions/v0.3.x/schema/">
    Schema
  </a>
</li>

      
        

        

<li>
  <a class="Desktop-nav__item " href="/versions/v0.3.x/serializers/">
    Serializers
  </a>
</li>

      
        

        

<li>
  <a class="Desktop-nav__item " href="/versions/v0.3.x/shorthands/">
    Shorthands
  </a>
</li>

      
        
          <li class='Desktop-nav__section'>Cookbook</li>
        

        

<li>
  <a class="Desktop-nav__item " href="/versions/v0.3.x/manually-starting-mirage/">
    Manually starting Mirage
  </a>
</li>

      
        

        

<li>
  <a class="Desktop-nav__item " href="/versions/v0.3.x/simulating-cookie-responses/">
    Simulating cookie responses
  </a>
</li>

      
    </ul>
  </div>
</div>


<div class="Center-panel">

  <div class="Docs-page">
    <div class='Docs-page__header'>
      <div class="Docs-page__version">
        <a class='Docs-page__improve' href="https://github.com/samselikoff/ember-cli-mirage/edit/gh-pages/versions/v0.3.x/fixtures.md">
          <small>
            <img class='Docs-page__improve-img' src="/versions/v0.3.x/assets/images/edit.png" alt="">
            <span class='Docs-page__improve-text'>Improve this page</span>
          </small>
        </a>
      </div>
      <h1 class='Docs-page__title'>Fixtures</h1>
    </div>

    <div class='Docs-page__content'>
      <p>Fixtures are data files that can be used to seed your database, either during development or within tests. In general Mirage recommends using factories over fixtures, though there are times where fixtures are suitable.</p>

<p>To add data to a database table <code class="highlighter-rouge">countries</code>, for instance, first create the file <code class="highlighter-rouge">mirage/fixtures/countries.js</code>:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// mirage/fixtures/countries.js</span>
<span class="k">export</span> <span class="k">default</span> <span class="p">[</span>
  <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="s1">'United States'</span><span class="p">},</span>
  <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="s1">'Canada'</span><span class="p">},</span>
  <span class="p">{</span><span class="na">id</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="s1">'Mexido'</span><span class="p">},</span>
  <span class="p">...</span>
<span class="p">];</span>
</code></pre></div></div>

<p>Fixture filenames are always plural, and export arrays of POJOs.</p>

<p>To load this fixture file into our database during development, we can use the <code class="highlighter-rouge">loadFixtures</code> API in our <code class="highlighter-rouge">scenarios/default.js</code> file:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// mirage/scenarios/default.js</span>
<span class="k">export</span> <span class="k">default</span> <span class="kd">function</span><span class="p">(</span><span class="nx">server</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">server</span><span class="p">.</span><span class="nx">loadFixtures</span><span class="p">(</span><span class="s1">'countries'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>We can also call <code class="highlighter-rouge">server.loadFixtures()</code> to have all defined fixture files loaded into the database.</p>

<p>Similarly, we can call <code class="highlighter-rouge">loadFixtures</code> from within a test to load this data into our database:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">test</span><span class="p">(</span><span class="s1">'I can see the countries'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">server</span><span class="p">.</span><span class="nx">loadFixtures</span><span class="p">(</span><span class="s1">'countries'</span><span class="p">);</span>

  <span class="nx">visit</span><span class="p">(</span><span class="s1">'/'</span><span class="p">);</span>

  <span class="nx">andThen</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">equal</span><span class="p">(</span> <span class="nx">find</span><span class="p">(</span><span class="s1">'select.countries option'</span><span class="p">).</span><span class="nx">length</span><span class="p">,</span> <span class="mi">100</span> <span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div>

<p>See the <a href="../configuration/#loadFixtures"><code class="highlighter-rouge">server.loadFixtures</code></a> docs for more information.</p>

<h2 id="relationships">Relationships</h2>

<p>Mirageâ€™s database relies on several convention for its ORM to function properly. By using fixtures you are inserting data directly into the db, and thus your fixtures must follow these conventions.</p>

<p>Foreign keys for belongs-to relationships must be suffixed with <code class="highlighter-rouge">Id</code> and has-many must be suffixed with <code class="highlighter-rouge">Ids</code>.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// mirage/fixtures/posts.js</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">[</span>
  <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">title</span><span class="p">:</span> <span class="s1">'Lorem'</span><span class="p">,</span> <span class="na">authorId</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">commentIds</span><span class="p">:</span> <span class="p">[</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span> <span class="p">]</span> <span class="p">}</span>
  <span class="p">{</span> <span class="nl">id</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">title</span><span class="p">:</span> <span class="s1">'Ipsum'</span><span class="p">,</span> <span class="nx">authorId</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="nx">commentIds</span><span class="p">:</span> <span class="p">[</span> <span class="p">]</span> <span class="p">}</span>
  <span class="p">{</span> <span class="nl">id</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="nx">title</span><span class="p">:</span> <span class="s1">'Dolor'</span><span class="p">,</span> <span class="nx">authorId</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="nx">commentIds</span><span class="p">:</span> <span class="p">[</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">10</span> <span class="p">]</span> <span class="p">}</span>
<span class="p">];</span>
</code></pre></div></div>


    </div>

    

<div class='Docs-page-nav'>
  
    
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
      
      
      
        
  
         <a class="Docs-page-nav__link u-first" href="/versions/v0.3.x/factories/">< Factories</a>
      
  
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
      
      
      
        
  
         <a class="Docs-page-nav__link u-last" href="/versions/v0.3.x/models/">Models ></a>
      
  
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
</div>

  </div>
</div>

      </div>
    </div>

    <footer class="Footer">
  <div class="Container Grid Grid--gutters Grid--full med-Grid--fit">
    <div class="Grid-cell">
      <p>Project and site maintained by <a href="https://twitter.com/samselikoff">Sam Selikoff</a> and <a href="https://github.com/samselikoff/ember-cli-mirage/graphs/contributors">contributors</a>.</p>
      <p>Sponsored by <a href="https://embermap.com/">EmberMap</a>.<p>
    </div>
    <div class="Grid-cell">
      <div class="Github-stars">
        <iframe src="https://ghbtns.com/github-btn.html?user=samselikoff&repo=ember-cli-mirage&type=star&count=true" frameborder="0" scrolling="0" width="170px" height="20px"></iframe>
      </div>
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/1.1.1/anchor.min.js"></script>
<script>
  /* global anchors */
  // anchors.options = {
  //   placement: 'left',
  //   visible: 'always'
  // };
  anchors.add('h2:not(.Home-page__feature-heading)');
</script>


  </body>
</html>
